(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{12:function(e,t,a){e.exports={pop_over_menu:"PopOverTopMenu_pop_over_menu__3Oqqw",pop_over_top:"PopOverTopMenu_pop_over_top__exlQd",place:"PopOverTopMenu_place__1OKzm",place_list:"PopOverTopMenu_place_list__llkQG",delete_button:"PopOverTopMenu_delete_button__3lU9G",draggable_element:"PopOverTopMenu_draggable_element__3z-97",deleted_place_list:"PopOverTopMenu_deleted_place_list__1ac2I",deleted_place_list_header:"PopOverTopMenu_deleted_place_list_header__3pTWg",main_button_top:"PopOverTopMenu_main_button_top__PrC_e",main_button_bottom:"PopOverTopMenu_main_button_bottom__17ijr"}},13:function(e,t,a){e.exports={popup:"Popup_popup__raNHr",popup_content:"Popup_popup_content__13In4",popup_message:"Popup_popup_message__1CHc1",popup_answers:"Popup_popup_answers__14FeL",popup_button_wrap:"Popup_popup_button_wrap__1NqgT",positive_answer:"Popup_positive_answer__1VJ43",negative_answer:"Popup_negative_answer__1y8fp",popup_button:"Popup_popup_button__3EWEJ"}},16:function(e,t,a){e.exports={preview_map:"PreviewMap_preview_map__3TXOf",top_menu:"PreviewMap_top_menu__2n82B",button_close:"PreviewMap_button_close__1xhJl",header_metric:"PreviewMap_header_metric__1bpKp",metric:"PreviewMap_metric__2G1EA",map_container:"PreviewMap_map_container__2jODV"}},19:function(e,t,a){e.exports={map_container:"YandexMap_map_container__27u6H",button_container:"YandexMap_button_container__3bUVL",zoom_container:"YandexMap_zoom_container__33Eok"}},35:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(18),c=a.n(n),i=a(7),r=(a(35),a(15));function o(e){var t=Array.isArray(e)?[]:{};for(var a in e)"object"===typeof e[a]?t[a]=o(e[a]):t[a]=e[a];return t}function s(e,t){console.log("selectTourReducer");var a=o(e);return a.selectedTourId=t,a.routeState=[],a}function u(e){var t=o(e);return void 0===t.selectedTourId||t.completedTouresId.includes(t.selectedTourId)||t.completedTouresId.push(t.selectedTourId),t.selectedTourId="",t.routeState=[],t}function l(e){console.log("passRoutePointReducer");var t=o(e),a=t.routeState.findIndex((function(e){return"active"===e.state}));return t.routeState[a].state="finished",a!==t.routeState.length-1&&(t.routeState[a+1].state="active"),t}var _=a.p+"static/media/image.00610e3a.svg",d=a.p+"static/media/image.0aba026c.svg",b=a.p+"static/media/image.ba0414de.svg",p={userData:{selectedTourId:"2",routeState:[],completedTouresId:["3"]},tours:[{id:"1",name:"\u0419\u043e\u0448\u043a\u0430\u0440-\u041e\u043b\u0430 \u0437\u0430 1 \u0434\u0435\u043d\u044c",image:_,description:"\u041f\u043e\u0441\u0442\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0435 \u0432\u0430\u0436\u043d\u044b\u0435 \u043c\u0435\u0441\u0442\u0430 \u0419\u043e\u0448\u043a\u0438 \u0432\u0441\u0435\u0433\u043e \u0437\u0430 1 \u0434\u0435\u043d\u044c.",places:[{id:"1",name:"\u041c\u0435\u0441\u0442\u043e",image:"",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435.",coordinates:{x:0,y:0},address:""}]},{id:"2",name:"\u041b\u0443\u0447\u0448\u0438\u0435 \u043c\u0435\u0441\u0442\u0430 \u0434\u043b\u044f \u0444\u043e\u0442\u043e",image:d,description:"\u041f\u0440\u0438\u0432\u0435\u0442! \u042d\u0442\u043e \u043f\u043e\u0434\u0431\u043e\u0440\u043a\u0430 \u0441\u0430\u043c\u044b\u0445 \u0444\u043e\u0442\u043e\u0433\u0435\u0438\u043d\u0438\u0447\u043d\u044b\u0445 \u043c\u0435\u0441\u0442 \u043d\u0430\u0448\u0435\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430.",places:[{id:"1",name:"\u0414\u043e\u043c \u0411\u0430\u0431\u043e\u0447\u043a\u0430",image:a.p+"static/media/image.325741ca.svg",description:"\u041f\u043e\u043b\u0443\u0447\u0430\u044e\u0442\u0441\u044f \u043a\u0430\u0434\u0440\u044b \u043a\u0430\u043a \u0441 \u043e\u0431\u043b\u043e\u0436\u0435\u043a \u201cMolchat Doma\u201d",coordinates:{x:56.62744065291153,y:47.913865970552685},address:"\u041b\u0435\u043d\u0438\u043d\u0441\u043a\u0438\u0439 \u043f\u0440\u043e\u0441\u043f\u0435\u043a\u0442, 16"},{id:"2",name:"\u0414\u043e\u043c \u0424\u043b\u0430\u043a\u043e\u043d",image:a.p+"static/media/image.a5c29dd9.svg",description:"\u041e\u0434\u0438\u043d \u0438\u0437 \u0444\u043b\u0430\u0433\u043c\u0430\u043d\u043e\u0432 \u0439\u043e\u0448\u043a\u0430\u0440-\u043e\u043b\u0438\u043d\u0441\u043a\u0438\u0445 \u0444\u043e\u0442\u043e-\u043c\u0435\u0441\u0442.",coordinates:{x:56.62829352962311,y:47.90562035707867},address:"\u042d\u0448\u043a\u0438\u043d\u0438\u043d\u0430, 2"},{id:"3",name:"iSpring",image:a.p+"static/media/image.2cadef2a.svg",description:"\u041d\u0443 \u043a\u0440\u0430\u0441\u043e\u0442\u0430 \u043a\u0430\u043a\u0430\u044f \u043d\u0443 \u0442\u044b \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438.",coordinates:{x:56.629823857993706,y:47.894747136134015},address:"\u0412\u043e\u0437\u043d\u0435\u0441\u0435\u043d\u0441\u043a\u0430\u044f, 110"},{id:"4",name:"\u041d\u0430\u0431\u0435\u0440\u0435\u0436\u043d\u0430\u044f \u0443\u043b\u0438\u0446\u0430",image:a.p+"static/media/image.53479c54.svg",description:"\u0414\u0443\u0445 \u0426\u0430\u0440\u0435\u0432\u043e\u043a\u043e\u0448\u0430\u0439\u0441\u043a\u0430 \u0441\u043f\u0440\u044f\u0442\u0430\u043d \u0433\u0434\u0435-\u0442\u043e \u0437\u0434\u0435\u0441\u044c!",coordinates:{x:56.641243,y:47.906103},address:"\u041d\u0430\u0431\u0435\u0440\u0435\u0436\u043d\u0430\u044f, 1"},{id:"5",name:"\u0412\u0430\u0440\u0430\u043a\u0441\u0438\u043d\u0441\u043a\u0438\u0439 \u043c\u043e\u0441\u0442",image:a.p+"static/media/image.4a8aa785.svg",description:"\u041d\u0435 \u0441\u0430\u043c\u043e\u0435 \u0440\u043e\u043c\u0430\u043d\u0442\u0438\u0447\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e, \u043d\u043e \u0441\u0430\u043c\u044b\u0439 \u0440\u043e\u043c\u0430\u043d\u0442\u0438\u0447\u044b\u0439 \u0432\u0438\u0434 \u043d\u0430 \u0419\u043e\u0448\u043a\u0430\u0440-\u041e\u043b\u0443, \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432\u0441\u044e \u043c\u043d\u043e\u0433\u043e\u043b\u0438\u043a\u043e\u0441\u0442\u044c \u043d\u0430\u0448\u0435\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430.",coordinates:{x:56.644361,y:47.911259},address:"\u0412\u043e\u0434\u043e\u043f\u0440\u043e\u0432\u043e\u0434\u043d\u0430\u044f"}]},{id:"3",name:"\u0413\u0430\u0441\u0442\u0440\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0442\u0443\u0440",image:b,description:"\u0412\u043e\u0442 \u0438 \u0442\u0443\u0440 \u043f\u043e \u0441\u0430\u043c\u044b\u043c \u0432\u043a\u0443\u0441\u043d\u044b\u043c \u0437\u0430\u0432\u0435\u0434\u043d\u0438\u044f\u043c \u041a\u0440\u0430\u0441\u043d\u043e\u0433\u043e \u0413\u043e\u0440\u043e\u0434\u0430.",places:[{id:"1",name:"\u041c\u0435\u0441\u0442\u043e",image:"",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435.",coordinates:{x:0,y:0},address:""}]}]};var m=Object(r.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TOUR":void 0!==t.id&&(e.userData=s(e.userData,t.id));break;case"COMPLETE_TOUR":e.userData=u(e.userData);break;case"PASS_ROUTE_POINT":e.userData=l(e.userData)}return e}),p),j=a(14),v=a(3),f=a(4),h=a(8),O=a.n(h),g=a(6),x=a.n(g),w=a(1),k=Object(i.b)()((function(e){var t=e.viewStyle,a=e.text,n=void 0===a?"":a,c=e.to,i=e.image,r=void 0===i?"":i,o=e.onClick,s=e.className,u=void 0===s?"":s,l="";switch(t){case"main":l=x.a.main;break;case"secondary":l=x.a.secondary;break;case"with_image":l=x.a.with_image;break;case"add":l=x.a.add;break;case"delete":l=x.a.delete;break;case"delete_outline":l=x.a.delete_outline;break;case"hint":l=x.a.hint;break;case"back":l=x.a.back;break;case"cancel":l=x.a.cancel;break;case"info":l=x.a.info;break;case"info_white":l=x.a.info_white;break;case"location":l=x.a.location;break;case"plus":l=x.a.plus;break;case"minus":l=x.a.minus;break;case"back_to_location":l=x.a.back_to_location}return Object(w.jsx)("button",{type:"button",className:"".concat(x.a.button," ").concat(l," ").concat(u),onClick:o,children:Object(w.jsxs)("div",{className:"main"===t||"secondary"===t||"with_image"===t?"main"===t?x.a.text_container_gradient:x.a.text_container:x.a.text_container_hide,children:[void 0!==c?Object(w.jsx)(j.b,{to:c,children:n}):Object(w.jsx)(w.Fragment,{children:n}),"with_image"===t?Object(w.jsx)("div",{className:x.a.image,style:{backgroundImage:"url(".concat(r,")")},children:" "}):null]})})}));var P=a(0);var N=Object(i.b)((function(e){var t=[];return e.tours.forEach((function(a){return t.push({id:a.id,name:a.name,description:a.description,image:a.image,finished:e.userData.completedTouresId.includes(a.id)})})),{tours:t}}),(function(e){return{selectTour:function(t){return e(function(e){return{type:"SELECT_TOUR",id:e}}(t))}}}))((function(e){var t=e.tours,a=e.selectTour,n=Object(P.useState)(0),c=Object(f.a)(n,2),i=c[0],r=c[1],o=Object(P.useRef)(null);return function(e){var t=e.elementRef,a=e.swipedRight,n=e.swipedLeft,c=Object(P.useRef)(0),i=Object(P.useRef)(0),r=Object(P.useCallback)((function(e){i.current=e.touches[0].clientX}),[]),o=Object(P.useCallback)((function(e){i.current>c.current-20&&0!==i.current?(n(),i.current=0):i.current<c.current-20&&0!==i.current&&(a(),i.current=0),window.removeEventListener("touchend",o),window.removeEventListener("touchmove",r)}),[a,n,r,i]),s=Object(P.useCallback)((function(e){t.current&&(window.addEventListener("touchend",o),window.addEventListener("touchmove",r),c.current=e.touches[0].clientX)}),[t,o,r]);Object(P.useEffect)((function(){var e;return t.current&&(t.current.addEventListener("touchstart",s,{passive:!1}),e=t.current),function(){e&&e.removeEventListener("touchstart",s)}}),[s,t])}({elementRef:o,swipedRight:function(){t.length>i+1&&o.current&&r(i+1)},swipedLeft:function(){i>0&&o.current&&r(i-1)}}),Object(w.jsxs)("div",{className:O.a.tour_select,children:[Object(w.jsxs)("div",{className:O.a.header_container,children:[Object(w.jsxs)("div",{className:O.a.header_top,children:[Object(w.jsx)("h1",{className:O.a.header_text,children:" \u0422\u0443\u0440\u044b \u043e\u0442 \u0413\u0438\u0434\u0430 "}),Object(w.jsx)(k,{viewStyle:"info",onClick:function(){}})]}),Object(w.jsxs)("div",{className:O.a.header_bot,children:[Object(w.jsx)("div",{className:O.a.placemark_image}),Object(w.jsx)("div",{className:O.a.town_name,children:" \u0419\u043e\u0448\u043a\u0430\u0440-\u041e\u043b\u0430 "})]})]}),Object(w.jsxs)("div",{className:O.a.tour_info_container,children:[Object(w.jsx)("h2",{className:O.a.tour_name,children:t[i].name}),Object(w.jsx)("h3",{className:O.a.tour_info,children:t[i].description})]}),Object(w.jsx)("div",{className:O.a.tour_images_container,ref:o,style:{transform:"translate(".concat(-300*i,"px, 0)"),width:"".concat(390+300*i,"px")},children:t.map((function(e){return Object(w.jsxs)("div",{className:"".concat(O.a.tour_image," ").concat(t.findIndex((function(t){return t.id===e.id}))===i&&O.a.tour_image_active),style:{backgroundImage:"url(".concat(e.image,")")},children:[Object(w.jsx)(k,{text:e.finished?"\u0410\u0439\u0434\u0430 \u0435\u0449\u0451!":"\u0412\u043f\u0435\u0440\u0451\u0434!",viewStyle:"main",to:"/previewtour",onClick:function(){a(t[i].id)}}),e.finished&&Object(w.jsx)("div",{className:O.a.finished_mark,children:"\u041f\u0440\u043e\u0439\u0434\u0435\u043d\u043e"})]},e.id)}))}),Object(w.jsx)("div",{className:O.a.slider_container,children:t.map((function(e){return Object(w.jsx)("div",{className:"".concat(O.a.tour_point," ").concat(t.findIndex((function(t){return t.id===e.id}))===i&&O.a.tour_point_active),children:" "},e.id)}))})]})})),y=a(5),T=a.n(y),S=a(11);var E=a(12),C=a.n(E),I=a(9),R=a.n(I),B=Object(i.b)((function(e){return{passRoutePoint:function(){return e({type:"PASS_ROUTE_POINT"})}}}))((function(e){var t=e.name,a=e.address,n=e.imageSrc,c=e.state,i=e.number,r=e.onClickFunction,o=e.passRoutePoint,s=Object(P.useRef)(null),u=Object(P.useRef)(null);!function(e){var t=e.checkBoxRef,a=e.state,n=e.onClickFunction,c=e.changeModelFunction,i=Object(P.useCallback)((function(e){"active"===a&&(c(),n())}),[a]);Object(P.useEffect)((function(){var e;return t.current&&(t.current.addEventListener("touchstart",i,{passive:!1}),e=t.current),function(){e&&e.removeEventListener("touchstart",i)}}),[t,a,i])}({checkBoxRef:s,state:c,onClickFunction:r,changeModelFunction:function(){return o}});return Object(w.jsxs)("div",{className:R.a.place_panel,ref:u,children:["tourPreview"!==c&&Object(w.jsx)("div",{className:"finished"===c?R.a.number__disabled:"deleted"===c?R.a.number__deleted:R.a.number__default,children:"deleted"===c?"":i}),"active"===c&&Object(w.jsx)("div",{className:R.a.blackout}),Object(w.jsx)("div",{className:"active"===c?R.a.img_active:"deleted"===c?"":R.a.img_default}),Object(w.jsx)("div",{className:"deleted"===c?R.a.img_deleted:R.a.main_img,style:{background:"url(".concat(n,") no-repeat center center / cover")}}),Object(w.jsxs)("div",{className:R.a.place_info,children:[Object(w.jsx)("h3",{className:R.a.name,children:t}),Object(w.jsx)("h4",{className:R.a.address,children:a})]}),Object(w.jsx)("div",{className:function(){switch(c){case"finished":return R.a.checkbox__active;case"active":return R.a.checkbox__default;case"default":case"deleted":case"tourPreview":return R.a.checkbox__none}}(),ref:s})]})})),D=a(17),M=a.p+"static/media/trashbin.37366568.svg",L=a.p+"static/media/trashbin_focused.cefb4af8.svg",H=a.p+"static/media/human.f6014a6b.svg",A=a(13),U=a.n(A),z=function(e){var t=e.state,a=e.name,n=e.onClick,c=e.onPositiveClick,i=e.onNegativeClick;c||(c=function(){}),i||(i=function(){});return Object(w.jsx)("div",{className:U.a.popup,children:Object(w.jsxs)("div",{className:U.a.popup_content,children:[Object(w.jsx)("div",{className:U.a.popup_message,children:"question"===t?"\u0412\u044b \u0434\u043e\u0448\u043b\u0438 \u0434\u043e ".concat(a,"?"):"\u0412\u044b \u043f\u0440\u043e\u0448\u043b\u0438 \u0442\u0443\u0440 ".concat(a)}),"question"===t&&Object(w.jsxs)("div",{className:U.a.popup_answers,children:[Object(w.jsx)("button",{onClick:function(){n("none"),c()},className:U.a.positive_answer,children:"\u0414\u0430"}),Object(w.jsx)("button",{onClick:function(){n("none"),i()},className:U.a.negative_answer,children:"\u041d\u0435\u0442"})]}),"final"===t&&Object(w.jsx)("div",{className:U.a.popup_button_wrap,children:Object(w.jsx)("button",{className:U.a.popup_button,children:Object(w.jsx)(j.b,{to:"/",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})})})]})})},F=Object(i.b)((function(e){var t=e.tours.findIndex((function(t){return t.id===e.userData.selectedTourId}));return{places:e.tours[t].places,routeState:e.userData.routeState}}))((function(e){var t=e.tourName,a=void 0===t?"":t,n=e.style,c=e.places,i=e.routeState,r=e.state,o=e.getRoute;n||(n="closed");var s=Object(P.useState)(c),u=Object(f.a)(s,2),l=u[0],_=u[1],d=Object(P.useState)([]),b=Object(f.a)(d,2),p=b[0],m=b[1],j=Object(P.useRef)(null),v=Object(P.useState)(!1),h=Object(f.a)(v,2),O=h[0],g=h[1],x=Object(P.useState)(i),N=Object(f.a)(x,2),y=N[0],T=N[1],E=Object(P.useState)("none"),I=Object(f.a)(E,2),R=I[0],A=I[1],U=Object(P.useRef)("\u043c\u0435\u0441\u0442\u0430"),F=Object(P.useState)(n),Y=Object(f.a)(F,2),Q=Y[0],V=Y[1],q=Object(P.useRef)(null),J=function(){var e=Array.from(y),t=0;e.map((function(e,a){if("active"===e.state)return e.state="finished",void(t=a)})),t+1<e.length?e[t+1].state="active":A("final"),T(e)},K=function(){switch(r){case"preview":return 97.27;case"editable":case"active":return 86.5}},Z=function(){switch(r){case"preview":return 37.94;case"editable":case"active":return 22}},X=document.documentElement.clientHeight*Z()/100;Object(P.useEffect)((function(){if("closed"===Q&&"editable"===r&&void 0!==o){var e=[];l.forEach((function(t){e.push({coordinates:[t.coordinates.x,t.coordinates.y],state:"default"})})),o(e)}return function(){}}),[Q]);var G="";switch(Q){case"closed":G="".concat(Z(),"vh");break;case"opened":G="".concat(K(),"vh")}!function(e){var t=e.elementRef,a=e.activeElementRef,n=e.setState,c=e.maxHeight,i=e.minHeight,r=e.avgHeight,o=Object(P.useRef)(0),s=Object(P.useRef)(!1),u=Object(P.useState)(o.current),l=Object(f.a)(u,2),_=l[0],d=l[1],b=Object(P.useRef)(0),p=Object(P.useRef)(0),m=Object(P.useCallback)((function(e){var t=o.current-e.touches[0].clientY+p.current,a=t/window.screen.availHeight*100;a>c&&(t=document.documentElement.clientHeight*c/100),a<i&&(t=document.documentElement.clientHeight*i/100),d(t),b.current=t}),[d,i,c]),j=Object(P.useCallback)((function(e){t.current&&(t.current.style.transition=".5s"),b.current/window.screen.availHeight*100<r?(n("opened"),n("closed")):(n("closed"),n("opened")),window.removeEventListener("touchmove",m),window.removeEventListener("touchend",j),s.current=!1}),[m,n,r,t]),v=Object(P.useCallback)((function(e){var n;e.preventDefault(),a.current&&t.current&&(t.current.style.transition="0s",o.current=document.documentElement.clientHeight-(null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect().top),s.current=!0,window.addEventListener("touchend",j),window.addEventListener("touchmove",m),p.current=e.touches[0].clientY)}),[a,t,j,m]);Object(P.useEffect)((function(){t.current&&s.current&&(t.current.style.height="".concat(_,"px"))}),[_,d,t]),Object(P.useEffect)((function(){var e;return a.current&&t.current&&(a.current.addEventListener("touchstart",v),e=a.current),function(){e&&e.removeEventListener("touchstart",v)}}),[v,t,a])}({elementRef:q,activeElementRef:"editable"===r?j:q,setState:V,avgHeight:60,maxHeight:K(),minHeight:Z()});var W=function(e){switch(r){case"preview":return"tourPreview";case"editable":return"default";case"active":return y.find((function(t){return t.placeId===e.id})).state}},$=l.map((function(e,t){return Object(w.jsx)("li",{className:C.a.place,children:Object(w.jsx)(D.b,{draggableId:e.id,index:t,isDragDisabled:"editable"!==r||"closed"===Q||1===l.length,disableInteractiveElementBlocking:!0,children:function(a,n){return Object(w.jsx)("div",Object(S.a)(Object(S.a)(Object(S.a)({className:C.a.draggable_element,ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{children:Object(w.jsx)(B,{name:e.name,address:e.address,imageSrc:e.image,state:W(e),number:t+1,onClickFunction:J})}))}},e.id)},e.id)})),ee=p.map((function(e,t){return Object(w.jsx)("li",{className:C.a.place,children:Object(w.jsx)(D.b,{draggableId:e.id,index:t,isDragDisabled:"editable"!==r||"closed"===Q,disableInteractiveElementBlocking:!0,children:function(a,n){return Object(w.jsx)("div",Object(S.a)(Object(S.a)(Object(S.a)({className:C.a.draggable_element,ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{children:Object(w.jsx)(B,{name:e.name,address:e.address,imageSrc:e.image,state:"deleted",number:t+1,onClickFunction:function(){}})}))}},e.id)},e.id)}));return Object(w.jsxs)("div",{children:["editable"===r&&Object(w.jsx)("div",{className:C.a.main_button_top,style:{transform:"translateY(".concat(-X-13,"px)")},children:Object(w.jsx)(k,{viewStyle:"with_image",image:H,text:"\u041d\u0430\u0447\u0430\u0442\u044c",onClick:function(){}})}),Object(w.jsx)(D.a,{onDragEnd:function(e){if(e.destination){var t=e.destination.droppableId,a=e.source.droppableId,n=Array.from(l),c=Array.from(p);if("droppableActive"===a){if("droppableActive"===t){var i=n.splice(e.source.index,1),r=Object(f.a)(i,1)[0];n.splice(e.destination.index,0,r)}else if("droppableDeleted"===t){var o=n.splice(e.source.index,1),s=Object(f.a)(o,1)[0];c.push(s)}}else if("droppableDeletedPlaces"===a)if("droppableActive"===t){var u=c.splice(e.source.index,1),d=Object(f.a)(u,1)[0];n.push(d)}else if("droppableDeletedPlaces"===t){var b=c.splice(e.source.index,1),j=Object(f.a)(b,1)[0];c.splice(e.destination.index,0,j)}_(n),m(c),g(!1)}},onDragStart:function(e){console.log(e),g("droppableActive"===e.source.droppableId)},children:Object(w.jsxs)("div",{ref:q,className:C.a.pop_over_menu,style:{height:"".concat(G)},children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:C.a.pop_over_top,ref:j}),Object(w.jsx)(D.c,{droppableId:"droppableActive",children:function(e,t){return Object(w.jsxs)("ul",Object(S.a)(Object(S.a)({className:C.a.place_list},e.droppableProps),{},{ref:e.innerRef,children:[$,e.placeholder]}))}}),Object(w.jsx)(D.c,{droppableId:"droppableDeleted",children:function(e,t){return Object(w.jsx)("div",Object(S.a)(Object(S.a)({className:C.a.delete_button},e.droppableProps),{},{ref:e.innerRef,style:{background:"url(".concat((a=t.isDraggingOver,O?a?L:M:""),") no-repeat center center")},children:e.placeholder}));var a}}),0!==ee.length&&Object(w.jsx)("h2",{className:C.a.deleted_place_list_header,children:"\u0423\u0431\u0440\u0430\u043d\u043e \u0438\u0437 \u0442\u0443\u0440\u0430"}),Object(w.jsx)(D.c,{droppableId:"droppableDeletedPlaces",isDropDisabled:!0,children:function(e,t){return Object(w.jsxs)("ul",Object(S.a)(Object(S.a)({},e.droppableProps),{},{ref:e.innerRef,className:C.a.deleted_place_list,children:[ee,e.placeholder]}))}})]}),!O&&"opened"===Q&&Object(w.jsx)("div",{className:C.a.main_button_bottom,children:function(){switch(r){case"preview":return null;case"editable":return Object(w.jsx)(k,{viewStyle:"with_image",image:H,onClick:function(){},text:"\u041d\u0430\u0447\u0430\u0442\u044c"});case"active":var e=y.findIndex((function(e){return"active"===e.state}));-1===e&&(e=i.length-1),U.current=c[e].name;var t,a,n=c[e].coordinates.x,o=c[e].coordinates.y;return navigator.geolocation.getCurrentPosition((function(e){t=e.coords.latitude,a=e.coords.longitude}),(function(e){}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}),Object(w.jsx)(k,{viewStyle:"with_image",onClick:function(){window.open("https://yandex.ru/maps/?rtext=".concat(t,",").concat(a,"~").concat(n,",").concat(o,"&rtt=pd")),A("question")},text:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442 \u0434\u043e \u0442\u043e\u0447\u043a\u0438 ".concat(e+1)})}}()})]})}),"none"!==R&&Object(w.jsx)(z,{state:R,name:"question"===R?U.current:a,onClick:A,onPositiveClick:J})]})})),Y=function(e){var t=e.tour,a=e.close;return Object(w.jsxs)("div",{className:T.a.info_places_list,children:[Object(w.jsx)(k,{viewStyle:"delete",onClick:a,className:T.a.button_close}),Object(w.jsxs)("div",{className:T.a.info_container,children:[Object(w.jsxs)("div",{className:T.a.general_info,children:[Object(w.jsxs)("div",{className:T.a.tour_info_header,children:["\u0422\u0443\u0440: ",t.name]}),Object(w.jsx)("div",{className:T.a.description,children:t.description})]}),t.places.map((function(e){return Object(w.jsxs)("div",{className:T.a.place_card,children:[Object(w.jsxs)("div",{className:T.a.general_info,children:[Object(w.jsxs)("div",{className:T.a.place_name,children:[Object(w.jsx)("div",{className:T.a.place_number,children:t.places.findIndex((function(t){return t.id===e.id}))+1}),e.name]}),Object(w.jsx)("div",{className:T.a.description,children:e.description})]}),Object(w.jsx)("div",{className:T.a.place_image,style:{backgroundImage:"url(".concat(e.image,")")}})]},e.id)}))]})]})},Q=Object(i.b)((function(e){var t=e.tours.findIndex((function(t){return t.id===e.userData.selectedTourId}));return{tour:e.tours[t]}}))((function(e){var t=e.tour,a=Object(P.useState)(!1),n=Object(f.a)(a,2),c=n[0],i=n[1],r=Object(v.f)();return Object(w.jsxs)("div",{className:T.a.preview_tour_container,children:[Object(w.jsxs)("div",{className:T.a.header,children:[Object(w.jsx)("div",{className:T.a.background_image,style:{backgroundImage:"url(".concat(t.image,")")},children:" "}),Object(w.jsx)(k,{viewStyle:"back",className:T.a.button_back,onClick:function(){r("/")}}),Object(w.jsx)("div",{className:T.a.tour_image,style:{backgroundImage:"url(".concat(t.image,")")},children:" "}),Object(w.jsx)("div",{className:T.a.tour_name,children:t.name}),Object(w.jsxs)("div",{className:T.a.tour_info_click,onClick:function(){return i(!0)},children:[Object(w.jsx)("div",{className:T.a.info_text,children:"\u041f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(w.jsx)(k,{viewStyle:"info_white",className:T.a.button_info,onClick:function(){}})]}),Object(w.jsx)(k,{text:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u043a\u0430\u0440\u0442\u0435",viewStyle:"main",to:"/previewmap",onClick:function(){},className:T.a.button_look})]}),Object(w.jsx)(F,{state:"preview"}),c&&Object(w.jsx)(Y,{tour:t,close:function(){return i(!1)}})]})})),V=a(20),q=a(19),J=a.n(q),K=a.p+"static/media/userLocation.54b6d9f6.svg",Z=Object(i.b)()((function(e){var t=e.routeState,a=Object(P.useRef)(null),n=function(){var e=Object(P.useState)(),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(P.useState)(),i=Object(f.a)(c,2),r=i[0],o=i[1];return Object(P.useEffect)((function(){var e=window.navigator.geolocation;if(e){var t=e.watchPosition((function(e){n({x:e.coords.latitude,y:e.coords.longitude})}),(function(){o("Error in getting geolocation")}));return function(){return e.clearWatch(t)}}o("Geolocation is not supported by browser")}),[]),Object(S.a)(Object(S.a)({},a),{},{error:r})}(),c=n.x,i=n.y,r=(n.error,function(e){var t=e.ymaps,n=e.route,c=e.x,i=e.y,r=Object(P.useRef)(-1),o=[];return Object(P.useEffect)((function(){return void 0!==c&&void 0!==i&&o.push([c,i]),n.forEach((function(e){return o.push(e.coordinates)})),t.route(o,{multiRoute:!0,routingMode:"pedestrian"}).then((function(e){e.options.set("mapStateAutoApply",!0),a.current.geoObjects.splice(r.current,1),a.current.geoObjects.add(e),r.current=a.current.geoObjects.indexOf(e)})),function(){}}),[t,n]),Object(w.jsx)(w.Fragment,{children:" "})}),o=Object(P.useMemo)((function(){return Object(V.d)(r,!0,["route"])}),[t]);return Object(w.jsx)("div",{className:J.a.map_container,children:Object(w.jsx)(V.c,{query:{apikey:"69b35853-10e5-483a-928c-fb414a02a744"},children:Object(w.jsxs)(V.a,{defaultState:{center:[56.64,47.89],zoom:13,controls:[]},options:{yandexMapDisablePoiInteractivity:!0},className:J.a.map_container,instanceRef:function(e){a.current=e},children:[Object(w.jsxs)("div",{className:J.a.button_container,children:[Object(w.jsxs)("div",{className:J.a.zoom_container,children:[Object(w.jsx)(k,{viewStyle:"plus",onClick:function(){return a.current.setZoom(a.current.getZoom()+1,{duration:250})}}),Object(w.jsx)(k,{viewStyle:"minus",onClick:function(){return a.current.setZoom(a.current.getZoom()-1,{duration:250})}})]}),Object(w.jsx)(k,{viewStyle:"back_to_location",onClick:function(){return a.current.setCenter([c,i],15,{duration:250})}})]}),void 0!==c&&void 0!==i&&Object(w.jsx)(V.b,{geometry:[c,i],options:{iconLayout:"default#image",iconImageHref:K,iconImageSize:[18,18],pixelRendering:"static"}}),void 0!==c&&void 0!==i&&Object(w.jsx)(o,{route:t,x:c,y:i})]})})})})),X=a(16),G=a.n(X),W=Object(i.b)()((function(){var e=Object(P.useState)([]),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(v.f)();return Object(w.jsxs)("div",{className:G.a.preview_map,children:[Object(w.jsxs)("div",{className:G.a.top_menu,children:[Object(w.jsx)("div",{className:G.a.header_metric,children:"\u0412\u0435\u0441\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442 (\u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e)"}),Object(w.jsx)("div",{className:G.a.metric,children:"50 \u043c\u0438\u043d\u0443\u0442, 2 \u043a\u043c"}),Object(w.jsx)(k,{viewStyle:"cancel",onClick:function(){return c("/previewtour")},className:G.a.button_close})]}),Object(w.jsx)("div",{className:G.a.map_container,children:Object(w.jsx)(Z,{routeState:a})}),Object(w.jsx)(F,{state:"editable",getRoute:function(e){n(e)}})]})})),$=document.getElementById("root");c.a.render(Object(w.jsx)(i.a,{store:m,children:Object(w.jsx)(j.a,{children:Object(w.jsxs)(v.c,{children:[Object(w.jsx)(v.a,{path:"/",element:Object(w.jsx)(N,{})}),Object(w.jsx)(v.a,{path:"previewtour",element:Object(w.jsx)(Q,{})}),Object(w.jsx)(v.a,{path:"previewmap",element:Object(w.jsx)(W,{})})]})})}),$)},5:function(e,t,a){e.exports={preview_tour_container:"PreviewTour_preview_tour_container__33ppy",header:"PreviewTour_header__3VcKh",tour_image:"PreviewTour_tour_image__1AAQf",tour_name:"PreviewTour_tour_name__2lCrB",tour_info_click:"PreviewTour_tour_info_click__18Vb4",info_text:"PreviewTour_info_text__o88PA",background_image:"PreviewTour_background_image__47jEL",button_look:"PreviewTour_button_look__1wClX",button_back:"PreviewTour_button_back__yw1A2",info_places_list:"PreviewTour_info_places_list__3Jeh3",info_container:"PreviewTour_info_container__ijVDz",button_close:"PreviewTour_button_close__3OccO",general_info:"PreviewTour_general_info__24UQx",tour_info_header:"PreviewTour_tour_info_header__YUcQ_",description:"PreviewTour_description__3bjHv",place_card:"PreviewTour_place_card__3ZAid",place_name:"PreviewTour_place_name__3Uvwe",place_number:"PreviewTour_place_number__UNNyj",place_image:"PreviewTour_place_image__2YpHb"}},6:function(e,t,a){e.exports={button:"Button_button__22qa6",main:"Button_main__3SL0h",secondary:"Button_secondary__6PObN",text_container:"Button_text_container__3xkl5",with_image:"Button_with_image__2lrdp",image:"Button_image__uI0XY",text_container_gradient:"Button_text_container_gradient__1SS9B",text_container_hide:"Button_text_container_hide__3z16d",add:"Button_add__1qflz",delete:"Button_delete__sQTjo",delete_outline:"Button_delete_outline__3yju6",hint:"Button_hint__2hlB0",back:"Button_back__tHwXB",cancel:"Button_cancel__215fw",info:"Button_info__36_e-",info_white:"Button_info_white__11X2B",location:"Button_location__1EvYR",plus:"Button_plus__2rCNW",minus:"Button_minus__16Q3D",back_to_location:"Button_back_to_location__2LTB2"}},8:function(e,t,a){e.exports={tour_select:"TourSelect_tour_select__3DQmZ",header_container:"TourSelect_header_container__g9tZ7",header_top:"TourSelect_header_top__1AJ1V",header_bot:"TourSelect_header_bot__3cQEP",placemark_image:"TourSelect_placemark_image__36EI7",town_name:"TourSelect_town_name__2U6Na",header_text:"TourSelect_header_text__2sKmK",tour_info_container:"TourSelect_tour_info_container__158K-",tour_name:"TourSelect_tour_name__29CNm",tour_info:"TourSelect_tour_info__3-TH7",tour_images_container:"TourSelect_tour_images_container__k7Ddc",tour_image:"TourSelect_tour_image__12oBU",finished_mark:"TourSelect_finished_mark__3djyc",tour_image_active:"TourSelect_tour_image_active__1iQ5K",slider_container:"TourSelect_slider_container__l5VHI",tour_point:"TourSelect_tour_point__1MJwe",tour_point_active:"TourSelect_tour_point_active__3YWDz"}},9:function(e,t,a){e.exports={place_panel:"PlacePanel_place_panel__2K_gt",place_info:"PlacePanel_place_info__AI5IM",name:"PlacePanel_name__1aJVG",address:"PlacePanel_address__sj9FF",number__default:"PlacePanel_number__default__3wBZa",number__disabled:"PlacePanel_number__disabled__22kDR",number__deleted:"PlacePanel_number__deleted__2eVeb",checkbox__default:"PlacePanel_checkbox__default__3ykMb",checkbox__active:"PlacePanel_checkbox__active__1nJUo",checkbox__none:"PlacePanel_checkbox__none__3aVev",img_default:"PlacePanel_img_default__1pCC2",img_active:"PlacePanel_img_active__1gIE4",img_deleted:"PlacePanel_img_deleted__2Rojs",main_img:"PlacePanel_main_img__1fU6Y",blackout:"PlacePanel_blackout__2zQH8"}}},[[38,1,2]]]);
//# sourceMappingURL=main.eb356a3e.chunk.js.map